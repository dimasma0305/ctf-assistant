<% 
const layoutData = {
    title: 'Session Status',
    user: null, // Public page
    currentPage: 'status',
    pageHeader: 'Bot Session Status',
    headerActions: `
        <button class="btn btn-primary btn-custom" onclick="refreshStatus()">
            <i class="bi bi-arrow-clockwise me-2"></i>Refresh
        </button>
        <a href="/" class="btn btn-secondary btn-custom">
            <i class="bi bi-house me-2"></i>Home
        </a>
    `,
    cssFiles: ['session-status'],
    jsFiles: ['session-status']
};
%>

<%- include('../layout', { 
    ...layoutData, 
    body: `
        <div id="status-container">
            <!-- Bot Status Card -->
            <div class="row mb-4">
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="bi bi-robot me-2"></i>Discord Bot Status
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-6">
                                    <label class="form-label">Status:</label>
                                    <div id="bot-status" class="metric-value">
                                        <div class="loading"></div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label class="form-label">Uptime:</label>
                                    <div id="bot-uptime" class="metric-value">Loading...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="bi bi-clock me-2"></i>Session Scheduler
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-12 mb-3">
                                    <label class="form-label">Scheduler Status:</label>
                                    <div id="session-status" class="metric-value">
                                        <div class="loading"></div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label class="form-label">Sessions:</label>
                                    <div id="remaining-sessions" class="metric-value">Loading...</div>
                                </div>
                                <div class="col-6">
                                    <label class="form-label">Reset In:</label>
                                    <div id="reset-time" class="metric-value">Loading...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Information -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="bi bi-info-square me-2"></i>System Information
                            </h5>
                            <small class="text-muted">
                                Last updated: <span id="last-update">Never</span>
                            </small>
                        </div>
                        <div class="card-body">
                            <div class="json-container" id="raw-json">
                                Loading system information...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `
}) %>
